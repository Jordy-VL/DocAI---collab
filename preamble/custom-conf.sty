%
% File:    Macros for Journal of Machine Learning Research
%      Very minor modification of macros for Journal of Artificial 
%      Intelligence Research (jair.sty) 
%

%\ProvidesPackage{custom-conf}

\newif\if@abbrvbib\@abbrvbibfalse
\DeclareOption{abbrvbib}{\@abbrvbibtrue}

\newif\if@usehyper\@usehypertrue
\DeclareOption{nohyperref}{\@usehyperfalse}
\DeclareOption{hyperref}{\@usehypertrue}

% declare preprint option, which creates a preprint version ready for
% upload to, e.g., arXiv
\newif\if@preprint\@preprintfalse
\DeclareOption{preprint}{
  \@preprinttrue
}

\DeclareOption*{\PackageWarning{jmlr}{Unknown ‘\CurrentOption’}}
\ProcessOptions\relax


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                             REQUIRED PACKAGES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{epsfig}
\RequirePackage{amssymb}
\RequirePackage{natbib}
\RequirePackage{graphicx}

%hyperref
\if@abbrvbib
\bibliographystyle{abbrvnat}
\else
\bibliographystyle{plainnat}
\fi

\bibpunct{(}{)}{;}{a}{,}{,}

\usepackage[usenames,dvipsnames]{xcolor}  % Coloured text etc.
\usepackage[colorlinks,linktoc=all,allbordercolors={1 1 1},backref=page]{hyperref}
%\usepackage[all]{hypcap}
\hypersetup{citecolor=MidnightBlue}
\hypersetup{linkcolor=MidnightBlue}
\hypersetup{urlcolor=MidnightBlue}
%%original
%\RequirePackage[colorlinks=false,allbordercolors={1 1 1}]{hyperref}


% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %                               S E C T I O N S
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setcounter{secnumdepth}{2}  
% % Definitions for nicer (?) sections, etc., ideas from Pat Langley.
% % Numbering for sections, etc. is taken care of automatically.

% \def\@startsiction#1#2#3#4#5#6{\if@noskipsec \leavevmode \fi
%   \par \@tempskipa #4\relax
%   \@afterindenttrue
%   \ifdim \@tempskipa <\z@ \@tempskipa -\@tempskipa \@afterindentfalse\fi
%   \if@nobreak \everypar{}\else
%      \addpenalty{\@secpenalty}\addvspace{\@tempskipa}\fi \@ifstar
%      {\@ssect{#3}{#4}{#5}{#6}}{\@dblarg{\@sict{#1}{#2}{#3}{#4}{#5}{#6}}}}

% \def\@sict#1#2#3#4#5#6[#7]#8{\ifnum #2>\c@secnumdepth
%      \def\@svsec{}\else
%      \refstepcounter{#1}\edef\@svsec{\csname the#1\endcsname}\fi
%      \@tempskipa #5\relax
%       \ifdim \@tempskipa>\z@
%         \begingroup #6\relax
%           \@hangfrom{\hskip #3\relax\@svsec.\hskip 0.1em}
%                     {\interlinepenalty \@M #8\par}
%         \endgroup
%       \csname #1mark\endcsname{#7}\addcontentsline
%          {toc}{#1}{\ifnum #2>\c@secnumdepth \else
%                       \protect\numberline{\csname the#1\endcsname}\fi
%                     #7}\else
%         \def\@svsechd{#6\hskip #3\@svsec #8\csname #1mark\endcsname
%                       {#7}\addcontentsline
%                           {toc}{#1}{\ifnum #2>\c@secnumdepth \else
%                              \protect\numberline{\csname the#1\endcsname}\fi
%                       #7}}\fi
%      \@xsect{#5}}

% \def\@sect#1#2#3#4#5#6[#7]#8{\ifnum #2>\c@secnumdepth
%      \def\@svsec{}\else 
%      \refstepcounter{#1}\edef\@svsec{\csname the#1\endcsname\hskip 0.5em }\fi
%      \@tempskipa #5\relax
%       \ifdim \@tempskipa>\z@ 
%         \begingroup #6\relax
%           \@hangfrom{\hskip #3\relax\@svsec}{\interlinepenalty \@M #8\par}
%         \endgroup
%       \csname #1mark\endcsname{#7}\addcontentsline
%          {toc}{#1}{\ifnum #2>\c@secnumdepth \else
%                       \protect\numberline{\csname the#1\endcsname}\fi
%                     #7}\else
%         \def\@svsechd{#6\hskip #3\@svsec #8\csname #1mark\endcsname
%                       {#7}\addcontentsline
%                           {toc}{#1}{\ifnum #2>\c@secnumdepth \else
%                              \protect\numberline{\csname the#1\endcsname}\fi
%                       #7}}\fi
%      \@xsect{#5}}

% \def\thesection {\arabic{section}}
% \def\thesubsection {\thesection.\arabic{subsection}}
% \def\section{\@startsiction{section}{1}{\z@}{-0.24in}{0.10in}
%              {\large\bf\raggedright}}
% \def\subsection{\@startsection{subsection}{2}{\z@}{-0.20in}{0.08in}
%                 {\normalsize\bf\raggedright}}
% \def\subsubsection{\@startsection{subsubsection}{3}{\z@}{-0.18in}{0.08in}
%                 {\normalsize\sc\raggedright}}
% \def\paragraph{\@startsiction{paragraph}{4}{\z@}{1.5ex plus
%   0.5ex minus .2ex}{-1em}{\normalsize\bf}}
% \def\subparagraph{\@startsiction{subparagraph}{5}{\z@}{1.5ex plus
%   0.5ex minus .2ex}{-1em}{\normalsize\bf}}

% \renewcommand{\appendix}{\par
%   \setcounter{section}{0}
%   \setcounter{subsection}{0}
%   \def\thesection{\Alph{section}}
% \def\section{\@ifnextchar*{\@startsiction{section}{1}{\z@}{-0.24in}{0.10in}%
%              {\large\bf\raggedright}}%
% {\@startsiction{section}{1}{\z@}{-0.24in}{0.10in}
%              {\large\bf\raggedright Appendix\ }}}}
